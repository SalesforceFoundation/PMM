<template>
    <lightning-card>
        <div class="slds-p-left_medium slds-p-right_xx-large">
            <div
                class="slds-p-horizontal_small slds-text-heading_large slds-m-bottom_x-large"
            >
                {labels.serviceDeliveries}
            </div>
            <div class="slds-text-title_caps">
                <lightning-layout class="slds-grid_vertical-align-center">
                    <template for:each={fieldSet} for:item="field">
                        <lightning-layout-item
                            size={field.size}
                            key={field.apiName}
                            class="slds-p-horizontal_small"
                        >
                            <template if:true={field.isRequired}>
                                <strong>{field.label}</strong>
                                <strong
                                    style="color: red;"
                                    class="slds-p-left_xx-small"
                                    aria-label={labels.required}
                                    >*</strong
                                >
                            </template>

                            <template if:false={field.isRequired}>
                                <strong>{field.label}</strong>
                            </template>
                        </lightning-layout-item>
                    </template>
                    <lightning-layout-item
                        size="1"
                        class="slds-p-horizontal_xx-small"
                    ></lightning-layout-item>
                </lightning-layout>
            </div>
            <template if:true={serviceDeliveries}>
                <template for:each={serviceDeliveries} for:item="delivery">
                    <div key={delivery.index}>
                        <c-service-delivery-row
                            default-values={defaultValues}
                            field-set={fieldSet}
                            index={delivery.index}
                            ondelete={handleDelete}
                            onsavestart={handleSaveStart}
                            onsaveend={handleSaveEnd}
                            row-count={rowCount}
                        ></c-service-delivery-row>
                    </div>
                </template>
            </template>
            <div class="slds-m-top_xx-large slds-p-top_xx-large slds-p-bottom_xx-large">
                <lightning-layout class="slds-grid_vertical-align-center">
                    <lightning-layout-item
                        flexibility="auto, no-grow"
                        class="slds-p-left_small"
                    >
                        <lightning-button
                            variant="brand"
                            icon-name="utility:add"
                            label={labels.addServiceDelivery}
                            onclick={addDelivery}
                        ></lightning-button>
                    </lightning-layout-item>
                    <lightning-layout-item flexibility="auto, no-grow">
                        <template if:true={isSaving}>
                            <div class="slds-p-left_large">
                                {saveMessage}
                            </div>
                        </template>
                    </lightning-layout-item>
                </lightning-layout>
            </div>
        </div>
    </lightning-card>
</template>
