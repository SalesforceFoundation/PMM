<!--
  - /*
  -  * Copyright (c) 2020, salesforce.com, inc.
  -  * All rights reserved.
  -  * SPDX-License-Identifier: BSD-3-Clause
  -  * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause
  -  */
  -->

<template>
    <c-modal
        header={labels.newServiceSchedule}
        ondialogclose={handleClose}
        default-visible="true"
        size="large"
        if:true={isLoaded}
    >
        <template if:true={isStep1}>
            <c-new-service-schedule
                service-id={serviceId}
                service-schedule-model={serviceScheduleModel}
            ></c-new-service-schedule>
        </template>
        <template if:true={isStep2}>
            <c-review-sessions
                service-schedule-model={serviceScheduleModel}
            ></c-review-sessions>
        </template>
        <template if:true={isStep3}>
            <c-participant-selector
                service-id={serviceId}
                service-schedule-model={serviceScheduleModel}
            ></c-participant-selector>
        </template>
        <template if:true={isStep4}>
            <c-service-schedule-review
                service-schedule-model={serviceScheduleModel}
            ></c-service-schedule-review>
        </template>
        <c-modal header={labels.goBack} is-nested="true">
            {labels.backWarning}

            <div slot="footer">
                <lightning-layout>
                    <lightning-layout-item alignment-bump="left">
                        <lightning-button
                            label={labels.cancel}
                            variant="neutral"
                            onclick={closeBackWarningModal}
                        ></lightning-button>
                        <lightning-button
                            label={labels.back}
                            variant="brand"
                            onclick={handleContinueBack}
                            class="slds-var-p-left_medium"
                        ></lightning-button>
                    </lightning-layout-item>
                </lightning-layout>
            </div>
        </c-modal>
        <div slot="footer">
            <lightning-layout horizontal-align="end">
                <lightning-layout-item
                    padding="around-small"
                    size="3"
                    class="slds-text-align_left"
                >
                    <lightning-button
                        if:true={currentStep.back}
                        name="back"
                        variant={currentStep.back.variant}
                        label={currentStep.back.label}
                        title={currentStep.back.label}
                        onclick={handleBack}
                    ></lightning-button>
                </lightning-layout-item>

                <lightning-layout-item
                    padding="around-small"
                    size="6"
                    class="slds-text-align_center"
                >
                    <lightning-progress-indicator
                        current-step={currentStep.value}
                        type="base"
                        variant="base"
                    >
                        <template for:each={steps} for:item="step">
                            <lightning-progress-step
                                key={step.value}
                                label={step.label}
                                value={step.value}
                            ></lightning-progress-step>
                        </template>
                    </lightning-progress-indicator>
                </lightning-layout-item>

                <lightning-layout-item padding="around-small" size="3">
                    <lightning-button
                        if:true={currentStep.next}
                        name="next"
                        variant={currentStep.next.variant}
                        label={currentStep.next.label}
                        title={currentStep.next.label}
                        onclick={handleNext}
                        class="slds-var-p-right_small"
                    ></lightning-button>
                    <lightning-button
                        if:true={currentStep.finish}
                        name="finish"
                        variant={currentStep.finish.variant}
                        label={currentStep.finish.label}
                        title={currentStep.finish.label}
                        onclick={handleFinish}
                    ></lightning-button>
                </lightning-layout-item>
            </lightning-layout>
        </div>
    </c-modal>
</template>
