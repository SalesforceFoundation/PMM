<!--
  - /*
  -  * Copyright (c) 2020, salesforce.com, inc.
  -  * All rights reserved.
  -  * SPDX-License-Identifier: BSD-3-Clause
  -  * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause
  -  */
  -->

<template>
    <c-section title={labels.addServiceParticipants} if:true={isLoaded}></c-section>
    <lightning-layout if:true={isLoaded} multiple-rows="true" horizontal-align="center">
        <lightning-layout-item
            if:true={showCapacityWarning}
            size="10"
            class="slds-var-m-top_small"
        >
            <c-scoped-notification
                title={labels.capacityWarning}
                theme="warning"
            ></c-scoped-notification>
        </lightning-layout-item>
        <lightning-layout-item size="10" class="slds-var-p-top_small">
            <lightning-layout horizontal-align="spread">
                <lightning-layout-item
                    size="8"
                    class="slds-var-p-right_small slds-var-p-top_xx-small"
                >
                    <lightning-layout multiple-rows="true">
                        <lightning-layout-item size="6" class="slds-var-p-bottom_small">
                            <lightning-input
                                type="String"
                                label={objectLabels.program.objectLabel}
                                value={programName}
                                class="slds-var-p-right_medium"
                                disabled
                            ></lightning-input>
                        </lightning-layout-item>
                        <lightning-layout-item size="6">
                            <lightning-combobox
                                label={labels.filterByCohort}
                                options={searchOptions}
                                onchange={handleCohortChange}
                                value={selectedCohortId}
                                placeholder={labels.none}
                            ></lightning-combobox>
                        </lightning-layout-item>
                        <lightning-layout-item size="12">
                            <div class="container">
                                <lightning-layout
                                    horizontal-align="spread"
                                    multiple-rows="true"
                                    vertical-align="end"
                                >
                                    <lightning-layout-item
                                        size="3"
                                        class="slds-var-p-left_small slds-var-p-bottom_medium"
                                    >
                                        {selectedRecordCountMessage}
                                    </lightning-layout-item>
                                    <lightning-layout-item
                                        size="3"
                                        class="slds-var-p-right_small slds-var-p-bottom_small"
                                    >
                                        <lightning-input
                                            name="enter-search"
                                            type="search"
                                            placeholder={labels.searchThisList}
                                            onchange={handleInputChange}
                                            value={searchValue}
                                        ></lightning-input>
                                    </lightning-layout-item>
                                    <lightning-layout-item
                                        size="12"
                                        if:false={noRecordsFound}
                                    >
                                        <div
                                            style="height:270px"
                                            class="slds-border_top slds-var-m-top_xx-small"
                                        >
                                            <lightning-datatable
                                                data={filteredEngagements}
                                                key-field="Id"
                                                columns={columns}
                                                show-row-number-column
                                                resize-column-disabled
                                                onrowselection={handleRowSelected}
                                            ></lightning-datatable>
                                            <div
                                                class="slds-theme_shade slds-align_absolute-center slds-border_top"
                                            >
                                                <lightning-button
                                                    variant="brand"
                                                    label={labels.addServiceParticipants}
                                                    class="slds-var-p-around_medium"
                                                    onclick={handleSelectParticipants}
                                                ></lightning-button>
                                            </div>
                                        </div>
                                    </lightning-layout-item>
                                    <lightning-layout-item
                                        if:true={noRecordsFound}
                                        size="12"
                                    >
                                        <div
                                            class="slds-align_absolute-center slds-text-heading_small slds-border_top slds-var-p-top_small"
                                        >
                                            {labels.noRecordsFound}
                                        </div>
                                    </lightning-layout-item>
                                </lightning-layout>
                            </div>
                        </lightning-layout-item>
                    </lightning-layout>
                </lightning-layout-item>
                <lightning-layout-item size="4">
                    <div class="container">
                        <div
                            class="slds-text-align_left slds-text-heading_small slds-var-p-around_small"
                        >
                            {scheduleHeader}
                        </div>
                        <div
                            if:false={noRecordsSelected}
                            style="height:425px"
                            class="slds-border_top"
                        >
                            <lightning-datatable
                                columns={selectedColumns}
                                key-field="Id"
                                hide-checkbox-column
                                onrowaction={handleDeselectParticipant}
                                data={selectedParticipants}
                                resize-column-disabled
                            ></lightning-datatable>
                        </div>
                        <template if:true={noRecordsSelected}>
                            <div
                                class="slds-align_absolute-center slds-text-heading_small slds-border_top slds-var-p-top_small"
                            >
                                {labels.noRecordsSelected}
                            </div>
                        </template>
                    </div>
                </lightning-layout-item>
            </lightning-layout>
        </lightning-layout-item>
    </lightning-layout>
</template>
